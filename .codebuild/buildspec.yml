version: 0.2


# Steps:
#   Checkout
#   Install dependencies
#   Run unit-tests
#   Static code analysis - linting
#   Security - dependency vulnerability scaner

phases:
  install:
    - python3 -m venv venv
    - . venv/bin/activate
    - npm install -g snyk
  build:
    commands:
      - . venv/bin/activate

      - echo "STAGE - install dependencies"
      - pip install -r requirements.txt

      - echo "STAGE - run unit-tests"
      - python HelloWorldTests.py

      - echo "STAGE - static code analysis - linting"
      - pycodestyle --show-source --show-pep8 ./HelloWorld.py

      - echo "STAGE - security - dependency vulnerability scaner"
      - snyk test
  post_build:
    commands:
      - echo "COMPLETE"
